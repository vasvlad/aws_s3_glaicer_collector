<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>

<link rel="stylesheet" type="text/css" media="screen" href="./css/flick/jquery-ui-1.7.2.custom.css" />
<link rel="stylesheet" type="text/css" media="screen" href="./css/ui.jqgrid.css" />

<style>
html, body {
margin: 0;
padding: 0;
font-size: 80%;
}
</style>
<script type="text/javascript" src="./js/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="./js/i18n/grid.locale-en.js"></script>
<script type="text/javascript" src="./js/jquery.jqGrid.min.js"></script>
<script type="text/javascript">
id_node=0;
level=0;
jQuery().ready(function() {
                 jQuery('#table_adjacency').jqGrid({
                                   treeGrid: true,
                                   gridview:false,
                                   treeGridModel:'adjacency',
                                   ExpandColumn : 'title',
                                   ExpandColClick: true,
                                   url: 'bs3.php',
                                   datatype: "json",
                                   multiselect: true,
                                   mtype: "POST",
                                      colNames:["id","Name","Size",""],
                                      colModel:[
                                         {name:'id',index:'id', width:1, hidden:true, key:true},
                                         {name:'title',index:'title', width:400},
                                         {name:'size',index:'size', width:100},
                                         {name:'is_bucket',index:'is_bucket', width:100, hidden:true}
                                      ],
                                      	gridComplete: function(){
//                                      	alert('aaaa');
                                      	},
//                                      onSelectRow: function(rowid) {
//alert('Я работаю!!');
//	    var data= $("#table_adjacency").jqGrid('getRowData',rowid);
	    // alert(data.id);
//				    },
				    afterInsertRow: function(row_id, row_data) {
				    alert('1');
//					    cel=row_data.is_bucket;
//				    alert(cel);
  //		  			    jQuery('#table_adjacency').jqGrid('setCell',row_id,'name','',{'color':red,'font-weight':'bold'});
                                    },
                                   treeIcons: {plus:'ui-icon-folder-collapsed',minus:'ui-icon-folder-open',leaf:'ui-icon-document'},
                                   height:'auto',
                                   caption:'tree of folders',
                                   pager : "#ptreegrid",
                                   hidegrid: false
                 });
                 
                 jQuery("#table_adjacency").jqGrid('navGrid','#ptreegrid',{edit:false, add:false, del:false, search: true},//options
		    {}, // edit options
		    {}, // add options
		    {}, // del options
		    {caption :"",
		    title : "найти записи",
		    buttonicon: "ui-icon-search", 
		    onClickButton: function() {
			alert("tyt");
		    }, 
		    position: "last"} // search options
		);
                 
});

$(document).ready(function(){
$("#load").click(function(){
$("#response").load("load.php");
});
});
</script>

</head>
<body>
    <table border='0'>
        <tr>
            <td valign="top">
            <table id="table_adjacency"></table>
            <div id="ptreegrid"></div>
            </td>
        </tr>
    </table>
    
</body>

</html>